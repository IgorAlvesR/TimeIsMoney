{"version":3,"sources":["webpack:///./src/app/pages/registro-deslocamento/registro-deslocamento.module.ts","webpack:///./src/app/pages/registro-deslocamento/registro-deslocamento.page.html","webpack:///./src/app/pages/registro-deslocamento/registro-deslocamento.page.scss","webpack:///./src/app/pages/registro-deslocamento/registro-deslocamento.page.ts"],"names":[],"mappings":"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","file":"pages-registro-deslocamento-registro-deslocamento-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { RegistroDeslocamentoPage } from './registro-deslocamento.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: RegistroDeslocamentoPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [RegistroDeslocamentoPage]\n})\nexport class RegistroDeslocamentoPageModule {}\n","module.exports = \"<ion-header>\\n  <ion-toolbar>\\n    <div class=\\\"header\\\">\\n      <ion-icon name=\\\"arrow-round-back\\\" button [routerLink]=\\\"['/registro-hora-extra']\\\"></ion-icon>\\n      <p class=\\\"ion-text-center\\\">REGISTRO DESLOCAMENTOS</p>\\n    </div>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <div #map></div>\\n  <div class=\\\"ion-text-center\\\">\\n    <ion-textarea rows=\\\"6\\\" cols=\\\"20\\\" placeholder=\\\"Descrição...\\\" [(ngModel)]='deslocamento.descricao'></ion-textarea>\\n    <ion-button color=\\\"primary\\\" (click)='registrarDeslocamento()'>Registrar Deslocamento</ion-button>\\n  </div>\\n</ion-content>\"","module.exports = \"ion-toolbar {\\n  --background: var(--ion-color-padraoApp);\\n  color: white; }\\n\\nion-icon {\\n  width: 25px;\\n  height: 25px;\\n  color: white;\\n  margin-left: 5px; }\\n\\n.header {\\n  display: -webkit-box;\\n  display: flex;\\n  -webkit-box-align: center;\\n          align-items: center; }\\n\\n.header p {\\n    margin-left: 25px; }\\n\\n.map {\\n  width: 50%;\\n  height: 50%; }\\n\\nion-textarea {\\n  border: 2px solid #4F9AF5;\\n  padding: 5px;\\n  border-radius: 15px;\\n  width: 80%;\\n  margin: 25px auto;\\n  text-align: left; }\\n\\nion-button {\\n  border-radius: 20%;\\n  width: 80%; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvcmVnaXN0cm8tZGVzbG9jYW1lbnRvL0M6XFxVc2Vyc1xcSWdvclxcRGVza3RvcFxcSUZTQ1xcSUZTQyAyMDE5LTJcXFRDQyBJSVxcVENDLUlJIEFwbGljYXRpdm8gSG9yYXMgRXh0cmFzXFxUaW1laXNtb25leWFwcC9zcmNcXGFwcFxccGFnZXNcXHJlZ2lzdHJvLWRlc2xvY2FtZW50b1xccmVnaXN0cm8tZGVzbG9jYW1lbnRvLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLHdDQUFhO0VBQ2IsWUFBWSxFQUFBOztBQUloQjtFQUNJLFdBQVc7RUFDWCxZQUFZO0VBQ1osWUFBWTtFQUNaLGdCQUFnQixFQUFBOztBQUdwQjtFQUNJLG9CQUFhO0VBQWIsYUFBYTtFQUNiLHlCQUFtQjtVQUFuQixtQkFBbUIsRUFBQTs7QUFGdkI7SUFLUSxpQkFBaUIsRUFBQTs7QUFLekI7RUFDSSxVQUFVO0VBQ1YsV0FBVyxFQUFBOztBQUdmO0VBQ0kseUJBQXlCO0VBQ3pCLFlBQVk7RUFDWixtQkFBbUI7RUFDbkIsVUFBVTtFQUNWLGlCQUFpQjtFQUNqQixnQkFBZ0IsRUFBQTs7QUFHcEI7RUFDSSxrQkFBa0I7RUFDbEIsVUFBVSxFQUFBIiwiZmlsZSI6InNyYy9hcHAvcGFnZXMvcmVnaXN0cm8tZGVzbG9jYW1lbnRvL3JlZ2lzdHJvLWRlc2xvY2FtZW50by5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJpb24tdG9vbGJhcntcclxuICAgIC0tYmFja2dyb3VuZDogdmFyKC0taW9uLWNvbG9yLXBhZHJhb0FwcCk7XHJcbiAgICBjb2xvcjogd2hpdGU7XHJcbn1cclxuXHJcblxyXG5pb24taWNvbntcclxuICAgIHdpZHRoOiAyNXB4O1xyXG4gICAgaGVpZ2h0OiAyNXB4O1xyXG4gICAgY29sb3I6IHdoaXRlO1xyXG4gICAgbWFyZ2luLWxlZnQ6IDVweDtcclxufVxyXG5cclxuLmhlYWRlcntcclxuICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gICAgXHJcbiAgICBwe1xyXG4gICAgICAgIG1hcmdpbi1sZWZ0OiAyNXB4O1xyXG4gICAgfVxyXG59XHJcblxyXG5cclxuLm1hcHtcclxuICAgIHdpZHRoOiA1MCU7XHJcbiAgICBoZWlnaHQ6IDUwJTtcclxufVxyXG5cclxuaW9uLXRleHRhcmVhe1xyXG4gICAgYm9yZGVyOiAycHggc29saWQgIzRGOUFGNTtcclxuICAgIHBhZGRpbmc6IDVweDtcclxuICAgIGJvcmRlci1yYWRpdXM6IDE1cHg7XHJcbiAgICB3aWR0aDogODAlO1xyXG4gICAgbWFyZ2luOiAyNXB4IGF1dG87XHJcbiAgICB0ZXh0LWFsaWduOiBsZWZ0O1xyXG59XHJcblxyXG5pb24tYnV0dG9ue1xyXG4gICAgYm9yZGVyLXJhZGl1czogMjAlO1xyXG4gICAgd2lkdGg6IDgwJTtcclxufSJdfQ== */\"","import { Component, OnInit, ViewChild } from '@angular/core';\nimport { Platform, LoadingController, NavController, ToastController } from '@ionic/angular';\nimport { GoogleMap, GoogleMaps, GoogleMapOptions, GoogleMapsEvent, MyLocation, GoogleMapsAnimation } from '@ionic-native/google-maps';\nimport { NativeGeocoder, NativeGeocoderOptions, NativeGeocoderResult } from '@ionic-native/native-geocoder/ngx';\nimport { Geolocation } from '@ionic-native/geolocation/ngx';\nimport { DeslocamentoService } from 'src/app/servicos/deslocamento.service';\nimport { Deslocamento } from 'src/app/Models/deslocamento';\nimport * as moment from 'moment'\nimport { LocationAccuracy } from '@ionic-native/location-accuracy/ngx';\nimport { AutenticacaoService } from 'src/app/servicos/autenticacao.service';\nimport { AndroidPermissions } from '@ionic-native/android-permissions/ngx';\nimport { AngularFirestore } from '@angular/fire/firestore';\n\n\n@Component({\n  selector: 'app-registro-deslocamento',\n  templateUrl: './registro-deslocamento.page.html',\n  styleUrls: ['./registro-deslocamento.page.scss'],\n})\nexport class RegistroDeslocamentoPage implements OnInit {\n\n  @ViewChild('map') mapElement: any\n  private loading: any\n  private map: GoogleMap\n  reserveGeocodingResults: string = \"\"\n  private deslocamento: Deslocamento = {}\n  \n\n  constructor(\n    private loadingCtrl: LoadingController,\n    public nativeGeocoder: NativeGeocoder,\n    public geolocation: Geolocation,\n    private deslocamentoService: DeslocamentoService,\n    private toastCtrl: ToastController,\n    private navCtrl: NavController,\n    private locationAccuracy: LocationAccuracy,\n    private authService: AutenticacaoService,\n    private androidPermissions: AndroidPermissions,\n    private angularFirestore: AngularFirestore\n  ) { }\n\n  ngOnInit() {\n    this.mapElement =  this.mapElement.nativeElement\n    this.mapElement.style.width = '100%'\n    this.mapElement.style.height = '50%'\n    \n  }\n\n  async ionViewWillEnter(){\n    await this.checkGPSPermission()\n    await this.loadMap()\n  }\n\n  async reverseGeocoding(latitude, longitude) {\n    var options: NativeGeocoderOptions = {\n      useLocale: true,\n      maxResults: 1\n    }\n    await this.nativeGeocoder.reverseGeocode(latitude, longitude, options)\n      .then((result: NativeGeocoderResult[]) => this.deslocamento.localizacao = result[0].subAdministrativeArea)\n  }\n\n  async registrarDeslocamento() {\n    this.loading = await this.loadingCtrl.create({ message: 'Por favor, aguarde...' })\n    await this.loading.present()\n    await this.geolocation.getCurrentPosition().then((position) => {\n      var latitude = position.coords.latitude\n      var longitude = position.coords.longitude\n      this.reverseGeocoding(latitude, longitude)\n    })\n    this.deslocamento.id = this.angularFirestore.createId();\n    this.deslocamento.data = moment().locale('pt-br').format('L')\n    this.deslocamento.hora = moment().locale('pt-br').format('LTS')\n    this.deslocamento.userId = this.authService.getAuth().currentUser.uid\n\n    try {\n      await this.deslocamentoService.registrar(this.deslocamento)\n      await this.navCtrl.navigateRoot('registro-hora-extra')\n      await this.loading.dismiss()\n    } catch (error) {\n      this.toastCtrl.create({ message: error, duration: 2000 })\n    }\n\n  }\n\n  async loadMap() {\n    this.loading = await this.loadingCtrl.create({ message: 'Por favor, aguarde...' })\n    await this.loading.present()\n    const mapOptions: GoogleMapOptions = {\n      controls: {\n        zoom: false\n      }\n    }\n    this.map = await GoogleMaps.create(this.mapElement, mapOptions)\n    await this.addOriginMarker()\n    try {\n      await this.map.one(GoogleMapsEvent.MAP_READY)\n      await this.addOriginMarker()\n    } catch (error) {\n      console.error(error)\n    }\n\n  }\n\n  async addOriginMarker() {\n    try {\n      const myLocation: MyLocation = await this.map.getMyLocation()\n      await this.map.moveCamera({\n        target: myLocation.latLng,\n        zoom: 18\n      })\n      this.map.addMarkerSync({\n        title: 'Localização Atual',\n        icon: '#000',\n        animation: GoogleMapsAnimation.DROP,\n        position: myLocation.latLng\n      })\n    } catch (error) {\n      console.error(error)\n    } finally {\n      this.loading.dismiss()\n    }\n  }\n\n  checkGPSPermission() {\n    this.androidPermissions.checkPermission(this.androidPermissions.PERMISSION.ACCESS_COARSE_LOCATION).then(\n      result => {\n        if (result.hasPermission) {\n          this.askToTurnOnGPS();\n        } else {\n          this.requestGPSPermission();\n        }\n      },\n      err => {\n        alert(err);\n      }\n    );\n  }\n\n  requestGPSPermission() {\n    this.locationAccuracy.canRequest().then((canRequest: boolean) => {\n      if (canRequest) {\n        console.log(\"4\");\n      } else {\n        this.androidPermissions.requestPermission(this.androidPermissions.PERMISSION.ACCESS_COARSE_LOCATION)\n          .then(\n            () => {\n              this.askToTurnOnGPS();\n            }\n          );\n      }\n    });\n  }\n  askToTurnOnGPS() {    \n    this.locationAccuracy.request(this.locationAccuracy.REQUEST_PRIORITY_HIGH_ACCURACY)\n  }\n\n\n\n\n}\n"],"sourceRoot":""}